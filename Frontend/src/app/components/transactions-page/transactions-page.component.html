<!-- Barra de filtros -->
<div class="card mb-4">
  <div class="card-body">
    <form class="row g-3">
      <div class="col-md-3">
        <label for="year" class="form-label">Año</label>
        <select class="form-select" id="year" [(ngModel)]="filters.year" name="year">
          <option value="">Todos</option>
          <option *ngFor="let y of years" [value]="y">{{ y }}</option>
        </select>
      </div>
      <div class="col-md-3">
        <label for="month" class="form-label">Mes</label>
        <select class="form-select" id="month" [(ngModel)]="filters.month" name="month">
          <option value="">Todos</option>
          <option *ngFor="let m of months" [value]="m.value">{{ m.label }}</option>
        </select>
      </div>
      <div class="col-md-3">
        <label for="type" class="form-label">Tipo de transacción</label>
        <select class="form-select" id="type" [(ngModel)]="filters.type" name="type">
          <option value="">Todos</option>
          <option value="INGRESO">Ingreso</option>
          <option value="GASTO">Gasto</option>
        </select>
      </div>
      <div class="col-md-2 d-flex align-items-end">
        <button type="button" class="btn btn-primary w-100" (click)="applyFilters()">Filtrar</button>
        <button type="button" class="btn btn-secondary w-100 ms-2" (click)="resetFilters()">Resetear</button>
      </div>
    </form>
    <!-- TODO: Añadir filtros avanzados -->
  </div>
</div>

<!-- Tabla principal de transacciones -->
<div class="card">
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-striped align-middle">
        <thead>
          <tr>
            <th>Fecha</th>
            <th>Tipo</th>
            <th>Importe</th>
            <th>Descripción</th>
            <th>Relacionado con</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let t of transactions">
            <td>{{ t.transactionDate }}</td>
            <td>
              <span class="badge" [ngClass]="{'bg-success': t.type === 'INGRESO', 'bg-danger': t.type === 'GASTO'}">
                {{ t.type }}
              </span>
            </td>
            <td>
              {{ t.amount  | currency:'EUR':'symbol':'1.0-0' }}
            </td>
            <td>{{ t.description }}</td>
            <td>
              <ng-container *ngIf="t.requestId">Solicitud #{{ t.requestId }}</ng-container>
              <ng-container *ngIf="t.apartmentId">Apartamento #{{ t.apartmentId }}</ng-container>
              <ng-container *ngIf="!t.requestId && !t.apartmentId">-</ng-container>
            </td>
            <td>
              <button class="btn btn-sm btn-outline-primary" disabled>Ver</button>
              <!-- TODO: Añadir acciones -->
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <!-- TODO: Añadir timeline, detalles expandibles, paginación -->
    <div class="d-flex justify-content-center align-items-center mt-3">
      <button class="btn btn-outline-secondary me-2" (click)="firstPage()" [disabled]="currentPage === 1">Primera</button>
      <button class="btn btn-outline-secondary me-2" (click)="prevPage()" [disabled]="currentPage === 1">Anterior</button>
      <span>Página {{ currentPage }} de {{ totalPages }}</span>
      <button class="btn btn-outline-secondary ms-2" (click)="nextPage()" [disabled]="currentPage === totalPages">Siguiente</button>
      <button class="btn btn-outline-secondary ms-2" (click)="lastPage()" [disabled]="currentPage === totalPages">Última</button>
    </div>
  </div>
</div>
