<div class="analyze-building-request">
  <form *ngIf="requestId == null" (ngSubmit)="submit()" class="ia-form">
    <div class="ia-header"><i class="bi bi-robot"></i> Analizar solicitud de edificio</div>
    <label for="requestId">Request ID:</label>
    <input id="requestId" type="number" [(ngModel)]="requestId" name="requestId" required>
    <button type="submit" class="btn btn-primary" [disabled]="loading">Analizar</button>
  </form>
  <div *ngIf="loading">Analizando...</div>
  <div *ngIf="error" class="error">{{ error }}</div>
  <div *ngIf="result">
    <div class="ia-header"><i class="bi bi-robot"></i> Resultado IA</div>
    <div *ngIf="result.decision">
      <div style="margin-bottom: 0.7rem;">
        <span class="ia-label">Decisi√≥n:</span> {{ result.decision }}
      </div>
      <hr style="margin: 0.5rem 0;">
      <div style="margin-bottom: 0.7rem;">
        <span class="ia-label">Motivo:</span> {{ result.reason }}
      </div>
      <hr *ngIf="result.insights" style="margin: 0.5rem 0;">
    </div>
    <div *ngIf="result.insights" style="margin-bottom: 0.7rem;">
      <span class="ia-label">Insights:</span> {{ result.insights }}
    </div>
    <div *ngIf="!result.decision">
      {{ result }}
    </div>
  </div>
</div>
