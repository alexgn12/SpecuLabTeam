<div class="requests-page">
  <div class="container requests-container">
    <header class="rq-header">
      <h2 class="rq-title text-center">Panel de Bienes en propiedad</h2>
      <p class="page-subtitle text-center">Edificios comprados y apartamentos alquilados</p>
    </header>
    <div class="segmented-control-wrapper">
      <div class="segmented-control">
        <button type="button" [class.active]="selectedTab === 'buildings'" (click)="selectTab('buildings')">Edificios comprados</button>
        <button type="button" [class.active]="selectedTab === 'apartments'" (click)="selectTab('apartments')">Apartamentos alquilados</button>
      </div>
    </div>
    <div *ngIf="loading" class="alert alert-info text-center">Cargando...</div>
    <div *ngIf="error" class="alert alert-danger text-center">{{ error }}</div>
    <div class="patrimony-flex" *ngIf="!loading && !error">
      <div class="patrimony-col" *ngIf="selectedTab === 'buildings'">
        <h4 class="text-center">Edificios Comprados</h4>
        <div class="table-responsive">
          <table class="table table-bordered table-hover table-sm">
            <thead class="table-light">
              <tr>
                <th>Código</th>
                <th>Nombre</th>
                <th>Dirección</th>
                <th>Distrito</th>
                <th>Año</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let b of pagedBuildings">
                <td>{{ b.buildingCode }}</td>
                <td>{{ b.buildingName }}</td>
                <td>{{ b.street }}</td>
                <td>{{ b.district }}</td>
                <td>{{ b.yearBuilt }}</td>
              </tr>
              <tr *ngIf="pagedBuildings.length === 0">
                <td colspan="5" class="text-center text-muted">No hay edificios comprados</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="pagination-wrapper" *ngIf="buildingsTotalPages > 1">
          <button (click)="prevPage('buildings')" [disabled]="buildingsPage === 1">‹</button>
          <span>Página {{ buildingsPage }} de {{ buildingsTotalPages }}</span>
          <button (click)="nextPage('buildings')" [disabled]="buildingsPage === buildingsTotalPages">›</button>
        </div>
      </div>
      <div class="patrimony-col" *ngIf="selectedTab === 'apartments'">
        <h4 class="text-center">Apartamentos Alquilados</h4>
        <div class="table-responsive">
          <table class="table table-bordered table-hover table-sm">
            <thead class="table-light">
              <tr>
                <th>Código</th>
                <th>Pta</th>
                <th>Piso</th>
                <th>Precio</th>
                <th>Habit.</th>
                <th>Baños</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let a of pagedApartments">
                <td>{{ a.apartmentCode }}</td>
                <td>{{ a.apartmentDoor }}</td>
                <td>{{ a.apartmentFloor }}</td>
                <td>{{ a.apartmentPrice | currency:'EUR':'symbol':'1.0-0' }}</td>
                <td>{{ a.numberOfRooms }}</td>
                <td>{{ a.numberOfBathrooms }}</td>
              </tr>
              <tr *ngIf="pagedApartments.length === 0">
                <td colspan="6" class="text-center text-muted">No hay apartamentos alquilados</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="pagination-wrapper" *ngIf="apartmentsTotalPages > 1">
          <button (click)="prevPage('apartments')" [disabled]="apartmentsPage === 1">‹</button>
          <span>Página {{ apartmentsPage }} de {{ apartmentsTotalPages }}</span>
          <button (click)="nextPage('apartments')" [disabled]="apartmentsPage === apartmentsTotalPages">›</button>
        </div>
      </div>
    </div>
  </div>
</div>
