<div class="budget-page">
  <div class="container budget-container">
    <header class="budget-header">
      <h2 class="page-title">Presupuestos</h2>
      <p class="page-subtitle">Resumen financiero y actividad reciente</p>
    </header>

    <!-- Loading -->
    <div *ngIf="loading" class="alert alert-info text-center">
      Cargando datos...
    </div>

    <!-- Error -->
    <div *ngIf="error" class="alert alert-danger text-center">
      {{ error }}
    </div>

    <!-- Contenido -->
    <ng-container *ngIf="!loading && !error">
      <!-- Row tarjetas principales -->
      <section class="row g-4 budget-cards">
        <div class="col-12 col-md-4">
          <sl-current-amount-card></sl-current-amount-card>
        </div>

        <div class="col-12 col-md-4">
          <sl-info-card
            class="flex-fill"
            [label]="'Patrimonio Total'"
            [value]="totalPatrimony"
            [currency]="'EUR'"
            [badge]="''"
            [badgeClass]="'bg-success-subtle text-success fw-semibold'">
          </sl-info-card>
        </div>

        <div class="col-12 col-md-4">
          <app-edificios-comprados-count></app-edificios-comprados-count>
        </div>
      </section>

      <!-- Separador -->
      <div class="section-divider" role="separator" aria-hidden="true"></div>

      <!-- Secci贸n: Gasto mensual + Transacciones -->
<!-- Secci贸n: Gasto mensual -->

<section class="section-card">
  <div class="section-card__header">
    <h3 class="section-title">Gasto mensual</h3>
    <p class="section-subtitle">Evoluci贸n por meses</p>
  </div>
  <div class="section-card__body">
    <div class="row">
      <div class="col-12 col-md-8 mb-3 mb-md-0">
        <gasto-mensual></gasto-mensual>
      </div>
      <div class="col-12 col-md-4 d-flex align-items-center justify-content-center">
        <sl-pie-gasto-ingreso [ingreso]="ingresoTotal" [gasto]="gastoTotal"></sl-pie-gasto-ingreso>
      </div>
    </div>
  </div>
</section>

<!-- Secci贸n: Transacciones -->
<section class="section-card">
  <div class="section-card__header">
    <h3 class="section-title">Transacciones</h3>
    <p class="section-subtitle">Movimientos recientes</p>
  </div>
  <div class="section-card__body">
    <transactions-page></transactions-page>
  </div>
</section>
    </ng-container>
  </div>
</div>
